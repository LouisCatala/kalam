import{bh as P,cb as z,bj as G,bi as U,aI as i,bH as Y,aT as r,bs as F,b as q,bb as E,bk as H,bd as M}from"./vendor.dfe763a8.js";import{M as O}from"./vendor_mui_datatables.e4cef698.js";import{a as b}from"./vendor_axios.5abceb0c.js";import{F as W,G as J,H as Q,b as h,c as k}from"./index.a0a07941.js";import"./vendor_core_js_pure.0ea38aa2.js";import"./vendor_lodash.61d30fe5.js";import"./vendor_react_epic_spinners.d732b23a.js";import"./vendor_react_slick.00ec4174.js";import"./vendor_react_easy_edit.bfc94365.js";import"./vendor_react_player.20d2e3d1.js";const w="https://join.navgurukul.org/api/",ie=()=>{const{enqueueSnackbar:A}=P(),l=z(),a=G(),I=()=>a(k(!0)),c=()=>a(k(!1)),{lang:N}=U(e=>e.ui),[B,$]=i.useState(null),[s,C]=i.useState({data:[],pendingInterviewStage:"checking"}),{search:y}=Y(),d=y.split("=")[1].split("&")[0],p=y.split("=")[2].split("&")[0],T=async e=>{try{const t=`0${p}`;I();const u=`${w}helpline/register_exotel_call`,f=await b.get(u,{params:{ngCallType:"getEnrolmentKey",From:t,partner_id:B,student_id:e}});return c(),f}catch(t){throw A("Something went wrong",{variant:"error",anchorOrigin:{vertical:"top",horizontal:"center"}}),c(),Error(t.message)}},_=[{name:"id",label:"Re-Test",options:{filter:!1,customBodyRender:i.useCallback((e,t)=>r(F,{disabled:t.rowData[1]==="pendingEnglishInterview"||t.rowData[1]==="pendingCultureFitInterview"||t.rowData[1]==="pendingAlgebraInterview",variant:"contained",color:"primary",style:{fontSize:"10px"},onClick:async()=>{const u=await T(e),[f,j,K]=d.split("_");a(W({firstName:f,middleName:j,lastName:K,mobileNumber:p})),a(J(u.data.key)),a(Q(e)),l("/test/instructions"),c()},children:"Re-Test"}),[])}},{name:"stage",label:"Stage",options:{filter:!1,customBodyRender:e=>h[e]}},{name:"stage",label:"Book Slot",options:{filter:!1,customBodyRender:i.useCallback((e,t)=>r(F,{disabled:t.rowData[1]!=="pendingEnglishInterview"&&t.rowData[1]!=="pendingCultureFitInterview"&&t.rowData[1]!=="pendingAlgebraInterview",variant:"contained",color:"primary",style:{fontSize:"10px"},onClick:()=>{l({pathname:`/bookSlot/${t.rowData[0]}`})},children:"Book Slot"}),[])}},{name:"total_marks",label:"Marks",options:{filter:!1,customBodyRender:(e,t)=>t.rowData[1]==="enrolmentKeyGenerated"&&e===null?"Last Test Not Submitted":e}},{name:"key",label:"Key",options:{filter:!1,display:!1,viewColumns:!1}}],S={stageMessage:{en:`Your  ${h[s.pendingInterviewStage]} is still pending. You\u2019re not required to give the online test now. We will soon complete your admission process.`,hi:`\u0906\u092A\u0915\u093E  ${h[s.pendingInterviewStage]}  \u0905\u092D\u0940 \u092D\u0940 \u091A\u0932 \u0930\u0939\u093E \u0939\u0948\u0902\u0964 \u0905\u092D\u0940 \u0906\u092A\u0915\u094B \u0911\u0928\u0932\u093E\u0907\u0928 \u092A\u0930\u0940\u0915\u094D\u0937\u093E \u0926\u0947\u0928\u0947 \u0915\u0940 \u0906\u0935\u0936\u094D\u092F\u0915\u0924\u093E \u0928\u0939\u0940\u0902 \u0939\u0948\u0964 \u0939\u092E \u091C\u0932\u094D\u0926 \u0939\u0940 \u0906\u092A\u0915\u0940 \u092A\u094D\u0930\u0935\u0947\u0936 \u092A\u094D\u0930\u0915\u094D\u0930\u093F\u092F\u093E (\u090F\u0921\u092E\u093F\u0936\u0928 \u092A\u094D\u0930\u094B\u0938\u0947\u0938) \u092A\u0942\u0930\u0940 \u0915\u0930 \u0926\u0947\u0902\u0917\u0947\u0964`},testFailedMessage:{en:", Your previous attempts were unsuccessful/test failed, please give the 1st stage of the online test again.",hi:", \u0906\u092A\u0915\u0947 \u092A\u093F\u091B\u0932\u0947 \u091F\u0947\u0938\u094D\u091F \u0905\u0938\u092B\u0932 \u0930\u0939\u0947 \u092F\u093E \u0906\u092A \u092A\u093E\u0938 \u0928\u0939\u0940\u0902 \u0939\u094B \u092A\u093E\u090F, \u0915\u0943\u092A\u092F\u093E \u0911\u0928\u0932\u093E\u0907\u0928 \u091F\u0947\u0938\u094D\u091F \u0935\u093E\u092A\u0938 \u0938\u0947 \u0926\u0947\u0964"}},x=()=>{const e=p;b.get(`${w}check_duplicate`,{params:{Name:d.split("_").join(""),Number:e}}).then(async t=>{const u=t.data.data;u.alreadyGivenTest&&C({...s,data:u.data,pendingInterviewStage:u.data[0].stage})})},R=async e=>{try{const t=await b.get(`${w}partners/slug/${e}`,{});$(t.data.data.id)}catch{l("/notFound")}};q.exports.useEffect(()=>{const e=window.location.href.split("partnerLanding/")[1];e&&R(e),x()},[]);const{data:L}=s,v=N;let n,g="",o;const m=d.split("_"),{pendingInterviewStage:D}=s;return m.length===3?[n,g,o]=m:[n,o]=m,E(H,{children:[E(M,{variant:"h5",id:"modal-title",children:["Student Status",r("br",{})]}),r(O,{title:D==="enrolmentKeyGenerated"||D==="testFailed"?`${n.concat(" ",g," ",o)}
            ${S.testFailedMessage[v]}`:`${n.concat(" ",g," ",o)}${S.stageMessage[v]}`,columns:_,data:L,options:{viewColumns:!1,print:!1,download:!1,exportButton:!0,pageSize:100,selectableRows:"none",rowsPerPage:20,rowsPerPageOptions:[20,40,60],toolbar:!1,filter:!1,responsive:"vertical"}})]})};export{ie as default};
